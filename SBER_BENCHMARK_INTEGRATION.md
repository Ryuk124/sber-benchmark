# üéâ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è sber-benchmark-main –∑–∞–≤–µ—Ä—à–µ–Ω–∞!

## üìã –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### ‚úÖ –ü–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ –∏–∑ `sber-benchmark-main`:

#### 1. **LLM Service** - –ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º AI
- `apps/ai/llm_service.py` - –°–µ—Ä–≤–∏—Å –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ –ë–î
- –ú–æ–¥–µ–ª—å `AIAnalysisResult` –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∞–Ω–∞–ª–∏–∑–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∞–Ω–∞–ª–∏–∑–∞ (facts, comparison, recommendation)
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ confidence scores –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ LLM

#### 2. **Text Parser** - –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –æ—á–∏—Å—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞ —Å–æ —Å–∞–π—Ç–æ–≤
- `apps/ai/text_parser.py` - PageTextParser –∫–ª–∞—Å—Å
- –°–∫–∞—á–∏–≤–∞–Ω–∏–µ HTML —Å —Å–∞–π—Ç–æ–≤ (requests)
- –£–¥–∞–ª–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤, —Å—Ç–∏–ª–µ–π –∏ –Ω–µ–Ω—É–∂–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (BeautifulSoup)
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ

#### 3. **Celery Tasks** - –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏
- `analyze_with_llm(bank_id, product_id, urls)` - –∑–∞–ø—É—Å–∫ –∞–Ω–∞–ª–∏–∑–∞
- `get_ai_recommendations()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
- –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Celery

#### 4. **API Endpoints** - REST –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
```
GET  /api/ai/analysis/                    - —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∞–Ω–∞–ª–∏–∑–æ–≤
GET  /api/ai/analysis/{id}/               - –¥–µ—Ç–∞–ª–∏ –∞–Ω–∞–ª–∏–∑–∞
GET  /api/ai/analysis/recommendations/    - —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
POST /api/ai/analysis/analyze/            - –∑–∞–ø—É—Å—Ç–∏—Ç—å –∞–Ω–∞–ª–∏–∑
GET  /api/ai/insights/                    - AI insights –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é
```

#### 5. **Django Integration**
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ `apps.ai` –≤ settings.py
- Admin –ø–∞–Ω–µ–ª—å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–Ω–∞–ª–∏–∑–∞–º–∏
- Serializers –¥–ª—è API
- URL routing

#### 6. **React Updates**
- `AIInsights.tsx` —Ç–µ–ø–µ—Ä—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —Å backend
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ `/api/ai/insights/`
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –∞–Ω–∞–ª–∏–∑—ã –∏–ª–∏ demo-–¥–∞–Ω–Ω—ã–µ

---

## üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
backend/
‚îú‚îÄ‚îÄ apps/
‚îÇ   ‚îî‚îÄ‚îÄ ai/                          # –ù–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ       ‚îú‚îÄ‚îÄ admin.py                 # Django admin
‚îÇ       ‚îú‚îÄ‚îÄ apps.py                  # –ö–æ–Ω—Ñ–∏–≥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ       ‚îú‚îÄ‚îÄ llm_service.py           # LLM —Å–µ—Ä–≤–∏—Å + –º–æ–¥–µ–ª—å AIAnalysisResult
‚îÇ       ‚îú‚îÄ‚îÄ text_parser.py           # PageTextParser
‚îÇ       ‚îú‚îÄ‚îÄ views.py                 # API views
‚îÇ       ‚îú‚îÄ‚îÄ urls.py                  # URL routing
‚îÇ       ‚îú‚îÄ‚îÄ migrations/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ 0001_initial.py      # –ë–î –º–∏–≥—Ä–∞—Ü–∏—è
‚îÇ       ‚îî‚îÄ‚îÄ (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ) llm-qwen.py
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îú‚îÄ‚îÄ settings.py                  # –û–±–Ω–æ–≤–ª–µ–Ω–∞ - –¥–æ–±–∞–≤–ª–µ–Ω 'apps.ai'
‚îÇ   ‚îî‚îÄ‚îÄ urls.py                      # –û–±–Ω–æ–≤–ª–µ–Ω–∞ - –¥–æ–±–∞–≤–ª–µ–Ω—ã API –ø—É—Ç–∏
‚îî‚îÄ‚îÄ apps/tasks/
    ‚îî‚îÄ‚îÄ celery_tasks.py              # –û–±–Ω–æ–≤–ª–µ–Ω–∞ - –¥–æ–±–∞–≤–ª–µ–Ω—ã AI –∑–∞–¥–∞—á–∏

src/
‚îî‚îÄ‚îÄ components/
    ‚îî‚îÄ‚îÄ AIInsights.tsx               # –û–±–Ω–æ–≤–ª–µ–Ω–∞ - –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —Å backend
```

---

## üöÄ –î–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã

### 1. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
```bash
cd backend
python manage.py migrate apps.ai
```

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å backend
```bash
python manage.py runserver
```

### 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å Celery worker (–¥–ª—è —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á)
```bash
celery -A config worker --loglevel=info
```

### 4. –ó–∞–ø—É—Å—Ç–∏—Ç—å React frontend
```bash
cd /Users/ivangorbunov/Desktop/sberbench-insights-main
npm run dev
```

### 5. –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ
```
http://localhost:5173
```

---

## üìä API –ø—Ä–∏–º–µ—Ä—ã

### –ü–æ–ª—É—á–∏—Ç—å –∞–Ω–∞–ª–∏–∑—ã
```bash
curl "http://localhost:8000/api/ai/analysis/?competitor=sber"
```

### –ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
```bash
curl "http://localhost:8000/api/ai/analysis/recommendations/?competitor=sber&limit=10"
```

### –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–Ω–∞–ª–∏–∑ (Celery –∑–∞–¥–∞—á–∞)
```bash
curl -X POST http://localhost:8000/api/ai/analysis/analyze/ \
  -H "Content-Type: application/json" \
  -d '{
    "competitor": "sber",
    "product": "deposits",
    "urls": ["https://example.com/page1"]
  }'
```

### –ü–æ–ª—É—á–∏—Ç—å AI insights
```bash
curl "http://localhost:8000/api/ai/insights/?banks=sber,vtb&product=deposits"
```

---

## üîå –ì–æ—Ç–æ–≤–æ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —Ä–µ–∞–ª—å–Ω—ã–º LLM

–ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è mock LLM (–¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏).

–î–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —Ä–µ–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª—å—é:

### ‚úÖ –í–∞—Ä–∏–∞–Ω—Ç 1: OpenAI GPT (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)
```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
pip install openai==1.3.0

# 2. –ü–æ–ª—É—á–∏—Ç—å –∫–ª—é—á –Ω–∞ https://platform.openai.com/api-keys

# 3. –î–æ–±–∞–≤–∏—Ç—å –≤ .env
OPENAI_API_KEY=sk-proj-your-key-here

# 4. –ì–æ—Ç–æ–≤–æ! –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å GPT-3.5-turbo
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: Anthropic Claude
```bash
pip install anthropic==0.7.0
ANTHROPIC_API_KEY=sk-ant-...
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –õ–æ–∫–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å (Ollama)
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Ollama –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å
ollama run llama2

# –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–∫–ª—é—á–∏—Ç—Å—è –∫ localhost:11434
```

**üìö –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: —Å–º. `LLM_SETUP.md`

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é, –ø—Ä–∏–º–µ—Ä—ã –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é:
- üìÑ `AI_INTEGRATION.md` - –î–µ—Ç–∞–ª—å–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

---

## ‚ú® –ß—Ç–æ –¥–∞–ª—å—à–µ?

### Immediate tasks:
- ‚úÖ LLM –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (mock –≥–æ—Ç–æ–≤, —Ä–µ–∞–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏ –≤ –æ—á–µ—Ä–µ–¥–∏)
- ‚úÖ Page Text Parser (–≥–æ—Ç–æ–≤)
- ‚úÖ Celery –∑–∞–¥–∞—á–∏ (–≥–æ—Ç–æ–≤—ã)
- ‚úÖ REST API (–≥–æ—Ç–æ–≤)
- ‚úÖ React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–æ–±–Ω–æ–≤–ª–µ–Ω—ã)

### Coming soon:
- üîÑ –†–µ–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Qwen LLM
- üîÑ –ü–∞—Ä—Å–µ—Ä—ã –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Å–∞–π—Ç–æ–≤ (banki.ru, sravni.ru, etc.)
- üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –ø–∞—Ä—Å–∏–Ω–≥–∞ —Å Celery Beat
- üîÑ ML –º–æ–¥–µ–ª–∏ –¥–ª—è —Ä–µ–π—Ç–∏–Ω–≥–∞ –±–∞–Ω–∫–æ–≤
- üîÑ –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –æ—Ç—á–µ—Ç—ã

---

## üéØ –°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞

```
‚úÖ Backend API              - –ü–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤
‚úÖ AI —Å–µ—Ä–≤–∏—Å               - –ì–æ—Ç–æ–≤ (mock LLM)
‚úÖ Text Parser             - –ì–æ—Ç–æ–≤
‚úÖ Celery Integration      - –ì–æ—Ç–æ–≤
‚úÖ React Frontend          - –û–±–Ω–æ–≤–ª–µ–Ω
‚úÖ Grafana Integration     - –†–∞–±–æ—Ç–∞–µ—Ç
‚úÖ Docker Setup            - –ì–æ—Ç–æ–≤

üîÑ –†–µ–∞–ª—å–Ω–∞—è LLM –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è - –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
üîÑ –†–µ–∞–ª—å–Ω—ã–µ –ø–∞—Ä—Å–µ—Ä—ã        - –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
üîÑ ML –º–æ–¥–µ–ª–∏               - –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è
```

---

## üêõ –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã

### –ú–∏–≥—Ä–∞—Ü–∏–∏ –Ω–µ –ø—Ä–∏–º–µ–Ω–∏–ª–∏—Å—å
```bash
python manage.py makemigrations apps.ai
python manage.py migrate apps.ai
```

### Celery –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Redis
redis-cli ping
# –î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏: PONG

# –ó–∞–ø—É—Å—Ç–∏—Ç—å worker
celery -A config worker --loglevel=debug
```

### API endpoints –Ω–µ –¥–æ—Å—Ç—É–ø–Ω—ã
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å URL –∫–æ–Ω—Ñ–∏–≥
python manage.py show_urls | grep ai

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å Django
python manage.py runserver
```

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã

–ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π –∏–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã - —Å–º–æ—Ç—Ä–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ `AI_INTEGRATION.md`

---

**–í—Å–µ –≥–æ—Ç–æ–≤–æ! üöÄ –ú–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å!**
